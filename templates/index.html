{% extends "base.html" %}

{% block title %}Document Scanner - Home{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <div class="floating">
        <h1 class="display-4 mb-3">
            <i data-feather="camera" class="me-3"></i>
            PaperForge
        </h1>
    </div>
    <p class="lead mb-4">Capture, scan, and convert your documents to PDF with ease</p>
    <div class="d-flex justify-content-center gap-3 flex-wrap">
        <span class="badge bg-primary">AI-Powered OCR</span>
        <span class="badge bg-success">PDF Generation</span>
        <span class="badge bg-info">Cloud Storage</span>
        <span class="badge bg-warning">Mobile Optimized</span>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="row g-4">
            <!-- Take Photo -->
            <div class="col-md-6">
                <div class="card h-100 text-center scanner-option hover-lift">
                    <div class="card-body d-flex flex-column position-relative">
                        <div class="position-absolute top-0 end-0 m-3">
                            <span class="badge bg-primary">Live Capture</span>
                        </div>
                        <div class="mb-4">
                            <i data-feather="camera" class="scanner-icon text-primary"></i>
                        </div>
                        <h5 class="card-title mb-2">Take Photo</h5>
                        <p class="card-text mb-4 text-muted">Use your device camera to capture documents with real-time processing</p>
                        <div class="mt-auto">
                            <a href="{{ url_for('capture') }}" class="btn btn-primary btn-lg w-100 mb-2">
                                <i data-feather="camera" class="me-2"></i>
                                Start Camera
                            </a>
                            <small class="text-muted">
                                <i data-feather="smartphone" class="me-1" style="width: 12px; height: 12px;"></i>
                                Mobile optimized
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Choose from Gallery -->
            <div class="col-md-6">
                <div class="card h-100 text-center scanner-option hover-lift">
                    <div class="card-body d-flex flex-column position-relative">
                        <div class="position-absolute top-0 end-0 m-3">
                            <span class="badge bg-success">Quick Upload</span>
                        </div>
                        <div class="mb-4">
                            <i data-feather="image" class="scanner-icon text-success"></i>
                        </div>
                        <h5 class="card-title mb-2">Upload Image</h5>
                        <p class="card-text mb-4 text-muted">Select images from your device storage for instant processing</p>
                        <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="mt-auto w-100">
                            <input type="file" name="file" accept="image/*" class="form-control mb-3" required>
                            <button type="submit" class="btn btn-success btn-lg w-100 mb-2">
                                <i data-feather="upload" class="me-2"></i>
                                Upload Image
                            </button>
                            <small class="text-muted">
                                <i data-feather="file-text" class="me-1" style="width: 12px; height: 12px;"></i>
                                Max 16MB â€¢ PNG, JPG, GIF
                            </small>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Convert to PDF (if images in session) -->
            {% if session.get('uploaded_images') %}
            <div class="col-md-6">
                <div class="card h-100 text-center scanner-option hover-lift">
                    <div class="card-body d-flex flex-column position-relative">
                        <div class="position-absolute top-0 end-0 m-3">
                            <span class="badge bg-warning text-dark">
                                <i data-feather="clock" style="width: 12px; height: 12px;" class="me-1"></i>
                                Ready
                            </span>
                        </div>
                        <div class="mb-4">
                            <i data-feather="file-text" class="scanner-icon text-warning"></i>
                        </div>
                        <h5 class="card-title mb-2">Preview & Convert</h5>
                        <p class="card-text mb-4 text-muted">
                            {{ session.get('uploaded_images')|length }} image(s) ready for PDF processing
                        </p>
                        <div class="mt-auto">
                            <a href="{{ url_for('preview') }}" class="btn btn-warning btn-lg w-100 mb-2 text-dark">
                                <i data-feather="eye" class="me-2"></i>
                                Preview Images
                            </a>
                            <small class="text-muted">
                                <i data-feather="zap" class="me-1" style="width: 12px; height: 12px;"></i>
                                OCR + PDF Generation
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- View History -->
            <div class="col-md-6">
                <div class="card h-100 text-center scanner-option hover-lift">
                    <div class="card-body d-flex flex-column position-relative">
                        <div class="position-absolute top-0 end-0 m-3">
                            <span class="badge bg-info">Archive</span>
                        </div>
                        <div class="mb-4">
                            <i data-feather="folder" class="scanner-icon text-info"></i>
                        </div>
                        <h5 class="card-title mb-2">Scan History</h5>
                        <p class="card-text mb-4 text-muted">View, download, and manage your previous scans</p>
                        <div class="mt-auto">
                            <a href="{{ url_for('history') }}" class="btn btn-info btn-lg w-100 mb-2">
                                <i data-feather="folder" class="me-2"></i>
                                View History
                            </a>
                            <small class="text-muted">
                                <i data-feather="download-cloud" class="me-1" style="width: 12px; height: 12px;"></i>
                                Cloud storage
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clear Session (if images exist) -->
        {% if session.get('uploaded_images') %}
        <div class="text-center mt-4">
            <a href="{{ url_for('clear_session') }}" class="btn btn-outline-danger">
                <i data-feather="x-circle" class="me-2"></i>
                Clear Current Session
            </a>
        </div>
        {% endif %}

        <!-- Features Showcase -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card hover-lift">
                    <div class="card-body text-center">
                        <h6 class="card-subtitle mb-4 text-muted">Powerful Features</h6>
                        <div class="row">
                            <div class="col-md-3 col-sm-6 mb-3">
                                <div class="feature-item">
                                    <i data-feather="camera" class="mb-3 text-primary" style="width: 32px; height: 32px;"></i>
                                    <h6 class="fw-bold">Camera Capture</h6>
                                    <small class="text-muted">Real-time document scanning</small>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3">
                                <div class="feature-item">
                                    <i data-feather="type" class="mb-3 text-success" style="width: 32px; height: 32px;"></i>
                                    <h6 class="fw-bold">OCR Processing</h6>
                                    <small class="text-muted">Extract text from images</small>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3">
                                <div class="feature-item">
                                    <i data-feather="file-text" class="mb-3 text-info" style="width: 32px; height: 32px;"></i>
                                    <h6 class="fw-bold">PDF Generation</h6>
                                    <small class="text-muted">Convert to professional PDFs</small>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6 mb-3">
                                <div class="feature-item">
                                    <i data-feather="archive" class="mb-3 text-warning" style="width: 32px; height: 32px;"></i>
                                    <h6 class="fw-bold">Smart Archive</h6>
                                    <small class="text-muted">Organize and manage scans</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stats Row -->
                        <div class="row mt-4 pt-4" style="border-top: 1px solid rgba(255,255,255,0.1);">
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <div class="h5 mb-1 text-primary">99.9%</div>
                                    <small class="text-muted">Accuracy Rate</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <div class="h5 mb-1 text-success">&lt; 3s</div>
                                    <small class="text-muted">Processing Time</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-item">
                                    <div class="h5 mb-1 text-info">16MB</div>
                                    <small class="text-muted">Max File Size</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
